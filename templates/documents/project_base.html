{% extends "_base.html" %}
{% load static %}
{% load document_filters %}
{% block body_class %}pt-16 bg-neutral-primary min-h-screen{% endblock %}
{% block content %}
<header class="sticky top-16 z-10 bg-neutral-primary border-b border-default">
  <nav class="bg-neutral-secondary-soft border-y border-default">
    <div class="max-w-screen-xl px-4 py-2.5 mx-auto">
      <div class="flex items-center gap-4">
        {# Left: back arrow + project name #}
        <div class="flex-1 min-w-0 flex justify-start">
          <a href="{% url 'project_list' %}" class="inline-flex items-center gap-1.5 text-sm font-medium text-body hover:text-heading truncate max-w-full" title="{{ project.name }}">
            <svg class="w-4 h-4 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12l4-4M5 12l4 4"/></svg>
            <span class="truncate">{{ project.name|truncate_project_name:75 }}</span>
          </a>
        </div>
        {# Center: section tabs #}
        <div class="flex flex-1 justify-center">
          <div class="inline-flex items-center rounded-base border border-default" role="tablist">
          {% if active_tab == 'chat' %}
          <span class="inline-flex items-center gap-1.5 text-sm font-semibold text-fg-brand bg-neutral-primary px-3 py-1.5 rounded-s-base" role="tab" aria-selected="true">
            <svg class="w-4 h-4 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></svg>
            Chat
          </span>
          {% else %}
          <a href="{% url 'project_chat' project_id=project.uuid %}" class="inline-flex items-center gap-1.5 text-sm font-medium text-body hover:text-heading hover:bg-neutral-secondary-medium px-3 py-1.5 rounded-s-base" role="tab" aria-selected="false">
            <svg class="w-4 h-4 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></svg>
            Chat
          </a>
          {% endif %}
          <div class="w-px bg-default self-stretch"></div>
          {% if active_tab == 'documents' %}
          <span class="inline-flex items-center gap-1.5 text-sm font-semibold text-fg-brand bg-neutral-primary px-3 py-1.5 rounded-e-base" role="tab" aria-selected="true">
            <svg class="w-4 h-4 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z M14 2v6h6 M16 13H8 M16 17H8 M10 9H8"/></svg>
            Documents
          </span>
          {% else %}
          <a href="{% url 'project_documents' project_id=project.uuid %}" class="inline-flex items-center gap-1.5 text-sm font-medium text-body hover:text-heading hover:bg-neutral-secondary-medium px-3 py-1.5 rounded-e-base" role="tab" aria-selected="false">
            <svg class="w-4 h-4 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z M14 2v6h6 M16 13H8 M16 17H8 M10 9H8"/></svg>
            Documents
          </a>
          {% endif %}
        </div>
        </div>
        {# Right: spacer so pills stay centered #}
        <div class="flex-1 min-w-0" aria-hidden="true"></div>
      </div>
    </div>
  </nav>
</header>
<div class="max-w-4xl mx-auto px-4 py-10">
  {% block project_content %}{% endblock %}
</div>
{% endblock %}
